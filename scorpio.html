<style>
  .teacher-box { background: rgba(0,0,0,0.6); padding: 10px; border-bottom: 2px solid #2a8b6f; font-size: 13px; }
  .valid-move { animation: pulse 1.5s infinite; border: 2px solid #00ff00 !important; }
  @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
</style>

function move(toC) {
  let fromC = selected.c, fromR = selected.r;
  let card = columns[fromC][fromR];
  let targetCol = columns[toC];
  
  if (targetCol.length === 0) {
    if (card.rank === 13) { // Vain Kuningas tyhjään
      executeMove(fromC, fromR, toC);
    } else {
      updateError("Vain Kuninkaan (K) voi siirtää tyhjään sarakkeeseen!");
    }
  } else {
    let lastTarget = targetCol[targetCol.length - 1];
    if (lastTarget.rank === card.rank + 1) {
      executeMove(fromC, fromR, toC);
    } else {
      updateError(`Ei käy! ${getRankName(card.rank)} pitää siirtää kortin ${getRankName(card.rank+1)} päälle.`);
    }
  }
  selected = null;
  draw();
}
