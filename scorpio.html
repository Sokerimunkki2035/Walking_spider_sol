<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Walking Scorpio - Pelaa Scorpion Pasianssia Ilmaiseksi</title>
  
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7652525244986434" crossorigin="anonymous"></script>

  <style>
    :root { 
        --card-aspect-ratio: 1.35; 
        --bg: #072b22; 
        --accent: #1e6b54; 
        --text-light: #78ffc8; 
    }
    
    body { 
        font-family: 'Segoe UI', sans-serif; 
        background: var(--bg); 
        color: white; 
        padding: 10px; 
        margin: 0; 
        user-select: none;
    }

    .header-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; flex-wrap: wrap; }
    .status-group { display: flex; gap: 8px; flex-wrap: wrap; }
    .pill { background: rgba(0,0,0,0.5); padding: 5px 10px; border-radius: 15px; font-size: 13px; border: 1px solid rgba(255,255,255,0.2); }

    .controls { margin-bottom: 15px; display: flex; gap: 8px; }
    button { padding: 10px 14px; cursor: pointer; background: var(--accent); color: white; border: none; border-radius: 6px; font-weight: bold; }
    
    #info { margin-bottom: 15px; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px; border-left: 4px solid var(--text-light); }

    #table { 
        display: grid; 
        grid-template-columns: repeat(7, 1fr); 
        gap: 5px; 
        min-height: 400px;
    }

    .column { background: rgba(255,255,255,0.05); border-radius: 4px; min-height: 250px; position: relative; }

    .card { 
        background: white; 
        border: 1px solid #222; 
        border-radius: 4px; 
        padding: 4px; 
        margin-bottom: -40px; 
        aspect-ratio: 1 / 1.35; 
        font-size: 16px; 
        font-weight: bold; 
        color: black;
        position: relative;
        box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }

    .card.face-down { background: #134537; color: transparent; border: 1px solid rgba(255,255,255,0.1); }
    .card.selected { outline: 3px solid #ffeb3b; z-index: 10; transform: translateY(-3px); }
    .suit-red { color: #d32f2f; }
    .suit-black { color: #1a1a1a; }

    .content-section { max-width: 800px; margin: 30px auto; padding: 20px; background: rgba(255,255,255,0.05); border-radius: 10px; text-align: left; }
    footer { margin-top: 40px; padding: 20px; text-align: center; opacity: 0.6; font-size: 13px; }
  </style>
</head>
<body>

<div class="header-row">
    <h1 style="margin:0; font-size: 20px; color:var(--text-light);">ðŸ¦‚ Walking Scorpio</h1>
    <div class="status-group">
        <div class="pill">ðŸ’¡ Siirtoja: <span id="pMovesUI">0</span></div>
        <div class="pill">ðŸ”„ Siirrot: <span id="actualUI">0</span></div>
    </div>
</div>

<div class="controls">
  <button onclick="newGame()">Uusi peli</button>
  <button id="stockBtn" onclick="dealStock()">VARA (3)</button>
  <button onclick="undoMove()" style="background: #444;">Peru</button>
</div>

<div id="info">Alustetaan pakkaa...</div>

<div id="table"></div>

<section class="content-section">
    <h2>Pelaa Scorpion Pasianssia</h2>
    <p>Scorpion on strateginen pasianssi, jossa voit siirtÃ¤Ã¤ mitÃ¤ tahansa pinoa. Tavoitteena on jÃ¤rjestÃ¤Ã¤ kortit maittain Kuninkaasta Ã„ssÃ¤Ã¤n.</p>
</section>

<footer>&copy; 2026 Walking Games - Itsmyid Oy</footer>

<script>
let deck = [], columns = [[],[],[],[],[],[],[]], stock = [], history = [];
let selCol = -1, selIdx = -1, actualMoves = 0;

function newGame() {
    deck = [];
    const suits = ['â™ ', 'â™£', 'â™¥', 'â™¦'];
    for (let s of suits) for (let r = 1; r <= 13; r++) deck.push({ rank: r, suit: s, faceUp: false });
    deck.sort(() => Math.random() - 0.5);
    
    columns = [[],[],[],[],[],[],[]];
    for (let i = 0; i < 49; i++) {
        let c = i % 7;
        let card = deck.pop();
        card.faceUp = !(c < 3 && columns[c].length < 3);
        columns[c].push(card);
    }
    stock = deck; selCol = -1; selIdx = -1; actualMoves = 0; history = [];
    document.getElementById("info").innerText = "Peli alkanut! Onnea matkaan.";
    updateUI();
}

function updateUI() {
    const table = document.getElementById("table");
    if (!table) return;
    table.innerHTML = "";
    
    columns.forEach((col, cIdx) => {
        let colDiv = document.createElement("div");
        colDiv.className = "column";
        colDiv.onclick = () => moveCards(cIdx);
        
        col.forEach((card, rIdx) => {
            let cardDiv = document.createElement("div");
            cardDiv.className = "card" + (!card.faceUp ? " face-down" : "");
            if (cIdx === selCol && rIdx >= selIdx) cardDiv.classList.add("selected");
            
            if (card.faceUp) {
                const isRed = (card.suit === 'â™¥' || card.suit === 'â™¦');
                cardDiv.classList.add(isRed ? "suit-red" : "suit-black");
                cardDiv.innerHTML = `<div>${getN(card.rank)} ${card.suit}</div>`;
                cardDiv.onclick = (e) => { e.stopPropagation(); select(cIdx, rIdx); };
            }
            colDiv.appendChild(cardDiv);
        });
        table.appendChild(colDiv);
    });
    
    document.getElementById("actualUI").innerText = actualMoves;
    document.getElementById("stockBtn").innerText = `VARA (${stock.length})`;
    document.getElementById("pMovesUI").innerText = countMoves();
}

function select(c, r) {
    if (selCol !== -1 && selCol !== c) { moveCards(c); return; }
    if (selCol === c && selIdx === r) { selCol = -1; selIdx = -1; }
    else { selCol = c; selIdx = r; }
    updateUI();
}

function moveCards(to) {
    if (selCol === -1) return;
    const card = columns[selCol][selIdx];
    const target = columns[to];
    let ok = false;
    let countMove = false;

    if (target.length === 0)
 
