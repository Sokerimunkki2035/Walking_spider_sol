<!doctype html>
<html lang="fi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7652525244986434"
     crossorigin="anonymous"></script>
<title>Spider Walk ‚Äì reilu peli</title>

<style>
:root{
  --bg:#004d40;
  --card:#ffffff;
  --txt:#10211e;
  --muted:#5b6f6b;
}

html,body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:var(--bg);
  color:white;
}

.wrap{
  max-width:720px;
  margin:0 auto;
  padding:14px;
}

.card{
  background:var(--card);
  color:var(--txt);
  border-radius:16px;
  padding:16px;
  box-shadow:0 10px 26px rgba(0,0,0,.25);
}

h1{
  font-size:20px;
  margin:0 0 10px;
}

.muted{ color:var(--muted); }
.small{ font-size:13px; }

.row{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
}

button{
  padding:12px 14px;
  border-radius:12px;
  border:0;
  font-weight:800;
  cursor:pointer;
}

button.primary{ background:#18b17a;color:#062; }
button.secondary{ background:#e8eeef;color:#233; }
button.locked{ background:#ccc;color:#666; cursor:not-allowed; }

.kpi{ font-size:28px;font-weight:900; }

hr{
  border:0;
  height:1px;
  background:#e7eded;
  margin:14px 0;
}

/* === MAINOKSET === */
.adCard{
  background:#fff;
  border-radius:16px;
  padding:10px;
  box-shadow:0 6px 16px rgba(0,0,0,.18);
}
.adLabel{
  font-size:11px;
  font-weight:800;
  color:#6a7c79;
  margin-bottom:6px;
}
.adBox{
  min-height:90px;
  border:2px dashed #c8d2d6;
  border-radius:12px;
  display:grid;
  place-items:center;
  background:#f7fafb;
  color:#2a3b3a;
  font-weight:900;
}
.spacer{ height:12px; }

.ok{ color:#0a7; font-weight:900; }
.warn{ color:#b60; font-weight:900; }

</style>
</head>

<body>

<div class="wrap">

<!-- MAINOS HEADER -->
<div class="adCard">
  <div class="adLabel">Mainos</div>
  <div class="adBox" data-ad="header"></div>
</div>
<div class="spacer"></div>

<!-- SPIDER -->
<div class="card">
  <h1>Spider Solitaire</h1>

  <p class="muted small">
    Pelaaminen avautuu vasta kun p√§iv√§n 1 km k√§vely on tehty.
  </p>

  <div class="row">
    <button id="playBtn" class="locked">Avaa Spider (lukossa)</button>
  </div>

  <p id="playHint" class="muted small"></p>
</div>

<div class="spacer"></div>

<!-- MAINOS SPIDER J√ÑLKEEN -->
<div class="adCard">
  <div class="adLabel">Mainos</div>
  <div class="adBox" data-ad="after-spider"></div>
</div>
<div class="spacer"></div>

<!-- K√ÑVELY -->
<div class="card">
  <h1>1 km k√§vely (p√§iv√§n haaste)</h1>

  <div class="row" style="justify-content:space-between">
    <div>
      <div class="muted small">T√§n√§√§n k√§velty</div>
      <div class="kpi"><span id="meters">0</span> m</div>
    </div>
    <div>
      <div class="muted small">Tila</div>
      <div id="walkStatus" class="warn">Ei valmis</div>
    </div>
  </div>

  <hr>

  <div class="row">
    <button id="startBtn" class="primary">Aloita mittaus</button>
    <button id="stopBtn" class="secondary" disabled>Lopeta</button>
  </div>
</div>

<div class="spacer"></div>

<!-- MAINOS K√ÑVELY J√ÑLKEEN -->
<div class="adCard">
  <div class="adLabel">Mainos</div>
  <div class="adBox" data-ad="after-walk"></div>
</div>
<div class="spacer"></div>

<!-- LEADERBOARD (valmiina my√∂hemm√§lle) -->
<div class="card">
  <h1>Leaderboard</h1>
  <p class="muted small">
    Tulossa: reilu daily deal, botti vastaan ja k√§vely-ranking.
  </p>
</div>

<div class="spacer"></div>

<!-- MAINOS FOOTER -->
<div class="adCard">
  <div class="adLabel">Mainos</div>
  <div class="adBox" data-ad="footer"></div>
</div>

</div>

<script>
/* =====================
   MAINOS DEMO
===================== */
document.querySelectorAll(".adBox").forEach(b=>{
  b.innerHTML = `
    <div style="text-align:center">
      <div>üì¢ MAINOS</div>
      <div style="font-size:12px;opacity:.7">AdSense t√§h√§n</div>
    </div>
  `;
});

/* =====================
   K√ÑVELY + LUKITUS
===================== */
const metersEl = document.getElementById("meters");
const walkStatus = document.getElementById("walkStatus");
const playBtn = document.getElementById("playBtn");
const playHint = document.getElementById("playHint");
const startBtn = document.getElementById("startBtn");
const stopBtn = document.getElementById("stopBtn");

let watchId = null;
let meters = 0;
let lastPos = null;

function updateUI(){
  metersEl.textContent = meters;
  if(meters >= 1000){
    walkStatus.textContent = "Valmis ‚úÖ";
    walkStatus.className = "ok";
    playBtn.className = "primary";
    playBtn.textContent = "Avaa Spider";
    playHint.textContent = "P√§iv√§n k√§vely tehty ‚Äì peli auki.";
  }else{
    playBtn.className = "locked";
    playBtn.textContent = "Avaa Spider (lukossa)";
    playHint.textContent = "K√§vele 1 km avataksesi pelin.";
  }
}

playBtn.onclick = ()=>{
  if(meters < 1000) return;
  window.open("https://solitaire.com/spider-solitaire/","_blank","noopener");
};

function dist(a,b){
  const R=6371000;
  const toRad=x=>x*Math.PI/180;
  const dLat=toRad(b.lat-a.lat);
  const dLon=toRad(b.lon-a.lon);
  const s=Math.sin(dLat/2)**2+
    Math.cos(toRad(a.lat))*Math.cos(toRad(b.lat))*Math.sin(dLon/2)**2;
  return 2*R*Math.asin(Math.sqrt(s));
}

startBtn.onclick=()=>{
  if(!navigator.geolocation){ alert("GPS ei tuettu"); return; }
  startBtn.disabled=true; stopBtn.disabled=false;
  watchId=navigator.geolocation.watchPosition(p=>{
    if(p.coords.accuracy>50) return;
    const cur={lat:p.coords.latitude,lon:p.coords.longitude};
    if(lastPos){
      const d=dist(lastPos,cur);
      if(d>2 && d<60) meters+=Math.round(d);
    }
    lastPos=cur;
    updateUI();
  });
};

stopBtn.onclick=()=>{
  if(watchId) navigator.geolocation.clearWatch(watchId);
  watchId=null;
  startBtn.disabled=false; stopBtn.disabled=true;
};

updateUI();
</script>
<p class="small" style="text-align:center;opacity:.7">
  <a href="privacy.html">Tietosuoja</a>
</p>
</body>
</html>
