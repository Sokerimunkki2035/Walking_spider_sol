<!doctype html>
<html lang="fi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Walking Spider ‚Äì Index</title>

<style>
:root{
  --bg:#0d4a3a;
  --panel:rgba(0,0,0,.18);
  --panel2:rgba(255,255,255,.10);
  --border:rgba(255,255,255,.16);
  --btn:rgba(255,255,255,.18);
  --btn2:rgba(120,255,200,.22);
  --txt:#fff;
}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:var(--bg);
  color:var(--txt);
}
.wrap{max-width:1100px;margin:0 auto;padding:12px;}

.card{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:16px;
  padding:12px;
  margin-bottom:10px;
}

.topbar{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
  justify-content:center;
}

.btn{
  border:0;
  border-radius:999px;
  padding:10px 14px;
  font-weight:900;
  cursor:pointer;
  background:var(--btn);
  color:#fff;
  white-space:nowrap;
}
.btn.primary{background:var(--btn2);}

.pill{
  padding:10px 14px;
  border-radius:999px;
  background:rgba(0,0,0,.25);
  border:1px solid rgba(255,255,255,.18);
  font-weight:900;
}

.row{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
  justify-content:center;
  margin-top:8px;
}

select{
  padding:10px 12px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.2);
  background:rgba(255,255,255,.10);
  color:#fff;
  font-weight:900;
}
option{color:#000}

.small{
  opacity:.85;
  font-size:13px;
  line-height:1.35;
  text-align:center;
}

/* ---------- IFRAME ---------- */
#appFrame{
  width:100%;
  height: calc(100vh - 230px);
  border:0;
  border-radius:16px;
  background:rgba(255,255,255,.08);
  box-shadow:0 10px 24px rgba(0,0,0,.25);
}

/* ---------- TOP PANEL COLLAPSE ---------- */
#topCard.collapsed #topInner{display:none;}
#topCard.collapsed{padding:8px}

/* ---------- BREAK OVERLAY ---------- */
#breakOverlay{
  display:none;
  position:fixed;
  inset:0;
  z-index:9999;
  background:rgba(0,35,30,.92);
  backdrop-filter:blur(4px);
  align-items:center;
  justify-content:center;
}
.breakBox{
  max-width:520px;
  width:100%;
  background:rgba(255,255,255,.10);
  border:1px solid rgba(255,255,255,.16);
  border-radius:18px;
  padding:16px;
  text-align:center;
}
.bigTimer{
  font-size:56px;
  font-weight:1000;
  margin:10px 0;
}
.progress{
  height:12px;
  border-radius:999px;
  background:rgba(255,255,255,.12);
  border:1px solid rgba(255,255,255,.14);
  overflow:hidden;
}
#progBar{
  height:100%;
  width:0%;
  background:rgba(120,255,200,.8);
}

.toast{
  position:fixed;
  left:50%;
  transform:translateX(-50%);
  bottom:14px;
  background:rgba(0,0,0,.75);
  border:1px solid rgba(255,255,255,.15);
  padding:10px 12px;
  border-radius:14px;
  font-weight:900;
  display:none;
  z-index:99999;
}
</style>
</head>

<body>
<div class="wrap">

<!-- TOP PANEL -->
<div class="card" id="topCard">
  <div id="topInner">

    <div class="topbar">
      <button class="btn primary" onclick="loadPage('spider.html')">üï∑ Spider</button>
      <button class="btn" onclick="loadPage('scorpio.html')">ü¶Ç Scorpio</button>
      <button class="btn" onclick="loadPage('golf.html')">‚õ≥ Golf</button>

      <button class="btn" onclick="forceBreak()">üö∂ Tauko nyt</button>
      <div class="pill">Aktiiviaika: <span id="activeClock">00:00</span></div>

      <button class="btn" onclick="toggleTop()">‚¨ÜÔ∏è Piilota</button>
    </div>

    <div class="row">
      <div class="pill">Tauko joka</div>
      <select id="everySel">
        <option value="15">15 min</option>
        <option value="20">20 min</option>
        <option value="25" selected>25 min</option>
        <option value="30">30 min</option>
      </select>

      <div class="pill">Tauon pituus</div>
      <select id="lenSel">
        <option value="3" selected>3 min</option>
        <option value="5">5 min</option>
        <option value="7">7 min</option>
      </select>

      <button class="btn" onclick="resetActive()">Nollaa</button>
    </div>

    <div class="small">
      Tauko lukitsee pelin. Pysyt indexiss√§, pelit aukeavat ruudun sis√§√§n.
    </div>
  </div>
</div>

<!-- GAME FRAME -->
<iframe id="appFrame" src="spider.html"></iframe>

<!-- FOOTER -->
<div class="card small">
  Tietosuoja: <a href="privacy.html" style="color:#eafff5;font-weight:900">privacy.html</a>
</div>

</div>

<!-- BREAK OVERLAY -->
<div id="breakOverlay">
  <div class="breakBox">
    <div style="font-weight:1000">üö∂ K√§velytauko</div>
    <div class="bigTimer" id="breakTimer">03:00</div>
    <div class="progress"><div id="progBar"></div></div>
    <button class="btn primary" id="doneBtn" disabled onclick="finishBreak()">Valmis</button>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
const frame=document.getElementById("appFrame");
function loadPage(p){frame.src=p;toast("Avattu: "+p);}
function toggleTop(){
  const c=document.getElementById("topCard");
  const b=event.target;
  c.classList.toggle("collapsed");
  b.textContent=c.classList.contains("collapsed")?"‚¨áÔ∏è N√§yt√§":"‚¨ÜÔ∏è Piilota";
}

/* ---- BREAK ENGINE ---- */
let active=0,every=25,len=3,onBreak=false,timer=null,bt=null;
const clk=document.getElementById("activeClock");
const everySel=document.getElementById("everySel");
const lenSel=document.getElementById("lenSel");

everySel.onchange=()=>every=+everySel.value;
lenSel.onchange=()=>len=+lenSel.value;

function fmt(s){return String(Math.floor(s/60)).padStart(2,"0")+":"+String(s%60).padStart(2,"0");}

function start(){
  timer=setInterval(()=>{
    if(onBreak||document.visibilityState!=="visible")return;
    active++;clk.textContent=fmt(active);
    if(active>=every*60)startBreak(len*60);
  },1000);
}
function resetActive(){active=0;clk.textContent="00:00";}
function forceBreak(){startBreak(len*60);}

function startBreak(sec){
  if(onBreak)return;
  onBreak=true;
  let left=sec;
  document.getElementById("breakOverlay").style.display="flex";
  document.getElementById("doneBtn").disabled=true;
  bt=setInterval(()=>{
    left--;
    document.getElementById("breakTimer").textContent=fmt(left);
    document.getElementById("progBar").style.width=((sec-left)/sec*100)+"%";
    if(left<=0){
      clearInterval(bt);
      document.getElementById("doneBtn").disabled=false;
    }
  },1000);
}
function finishBreak(){
  onBreak=false;
  active=0;
  clk.textContent="00:00";
  document.getElementById("breakOverlay").style.display="none";
}

function toast(t){
  const el=document.getElementById("toast");
  el.textContent=t;
  el.style.display="block";
  clearTimeout(el._t);
  el._t=setTimeout(()=>el.style.display="none",1200);
}

start();
</script>
</body>
</html>
