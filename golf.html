<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Golf Solitaire - Mobile</title>
  <style>
    body { font-family: sans-serif; background: #0d4a3a; color: white; text-align: center; margin: 0; overflow-x: hidden; }
    .controls { padding: 10px; background: rgba(0,0,0,0.2); }
    button { padding: 10px; margin: 5px; background: #2a8b6f; color: white; border: none; border-radius: 5px; font-weight: bold; }
    #table { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; padding: 5px; margin-top: 10px; }
    .column { display: flex; flex-direction: column; align-items: center; }
    .card { background: white; color: black; border: 1px solid #333; border-radius: 4px; 
            width: 100%; max-width: 45px; height: 60px; margin-bottom: -40px; 
            display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; box-shadow: 0 2px 4px rgba(0,0,0,0.3); }
    .waste-area { margin-top: 60px; display: flex; justify-content: center; gap: 40px; padding: 20px; }
    .pile { background: #1a5f4a; border: 2px solid #88c9b6; width: 60px; height: 85px; border-radius: 5px; display: flex; align-items: center; justify-content: center; font-size: 12px; }
    .current-card { background: white; color: black; width: 60px; height: 85px; border-radius: 5px; display: flex; align-items: center; justify-content: center; font-size: 28px; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.5); }
  </style>
</head>
<body>
  <div class="controls">
    <button onclick="initGame()">Uusi Golf</button>
    <button onclick="location.href='index.html'">Takaisin</button>
  </div>
  <div id="table"></div>
  <div class="waste-area">
    <div class="pile" onclick="drawFromDeck()">PAKKA</div>
    <div id="waste" class="current-card">-</div>
  </div>
<script>
let deck = [], columns = [], wasteCard = null;
function initGame() {
  deck = [];
  for(let r=1; r<=13; r++) for(let s=0; s<4; s++) deck.push(r);
  deck.sort(() => Math.random() - 0.5);
  columns = Array.from({length: 7}, () => []);
  for(let i=0; i<35; i++) columns[i % 7].push(deck.pop());
  wasteCard = deck.pop();
  drawTable();
}
function drawTable() {
  const table = document.getElementById("table");
  table.innerHTML = "";
  columns.forEach((col, cIdx) => {
    let div = document.createElement("div");
    div.className = "column";
    col.forEach((rank, rIdx) => {
      let cDiv = document.createElement("div");
      cDiv.className = "card";
      cDiv.innerText = getRankName(rank);
      if(rIdx === col.length - 1) cDiv.onclick = () => playCard(cIdx);
      div.appendChild(cDiv);
    });
    table.appendChild(div);
  });
  document.getElementById("waste").innerText = getRankName(wasteCard);
}
function playCard(cIdx) {
  let card = columns[cIdx][columns[cIdx].length - 1];
  // Sääntö: Yksi suurempi tai pienempi
  if(Math.abs(card - wasteCard) === 1 || (wasteCard === 13 && card === 1) || (wasteCard === 1 && card === 13)) {
    wasteCard = columns[cIdx].pop();
    drawTable();
  }
}
function drawFromDeck() {
  if(deck.length > 0) { wasteCard = deck.pop(); drawTable(); }
}
function getRankName(r) {
  const n = {1:'A', 11:'J', 12:'Q', 13:'K'};
  return n[r] || r;
}
initGame();
</script>
</body>
</html>
